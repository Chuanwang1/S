# 智能语音识别垃圾桶设计项目

## 项目简介

本项目基于 STM32 微控制器，实现一个可以用语音交互控制的智能垃圾桶。功能包括：

1. 垃圾容量检测，垃圾桶溢满时屏幕显示
2. 语音识别垃圾种类，并自动打开相应垃圾桶盖子
3. 语音播报垃圾种类
4. OLED 显示投放次数、垃圾桶是否满
5. 精准识别垃圾并打开/关闭对应垃圾桶盖子
6. 智能自动照明系统（白天关灯，黑夜开灯照明）
7. 通过 WiFi 模块连接云平台，云平台可查看垃圾桶是否满
8. 按钮手动开盖

---

## 仓库结构说明

### 1. STM32F10x_FWLib 目录

- **作用**：STM32 官方标准外设库，包含所有底层硬件驱动代码（如 GPIO、ADC、DMA、串口等）。
- **src/**：实现文件（.c），不能随意修改，除非有特殊需求。
- **inc/**：头文件（.h），声明外设驱动函数，也不建议修改。

> **注意**：此目录内容用于底层硬件驱动，建议保持原样，除非你有 STM32 底层开发经验并确实需要更改硬件驱动实现。

### 2. USER 目录

- **作用**：项目核心代码，主要实现应用逻辑和各功能模块，是你开发和编辑的主要区域。
- **常见文件说明**：
  - `main.c`：主程序入口，初始化各模块并运行主循环。**需要重点编辑**。
  - `gpio.c/h`：GPIO 控制相关代码（如LED、按键、继电器等）。如需扩展硬件功能，可编辑。
  - `motor_duoji.c/h`：电机/舵机驱动，实现垃圾桶盖子的开关。**需要根据实际舵机调整**。
  - `key.c/h`：按键输入处理。**按键功能相关编辑**。
  - `oled.c/h`：OLED 显示屏驱动及显示逻辑。**显示内容相关编辑**。
  - `adc.c/h`：模数转换，垃圾容量检测等。**检测功能相关编辑**。
  - `usart.c/h`：串口通信，常用于语音模块、WiFi模块数据交互。**语音/WiFi通信相关编辑**。
  - `delay.c/h`：延时处理。
  - `sys.c/h`：系统功能扩展。
  - `ds18b20.c/h`：温度传感器驱动（如需环境温度检测）。
  - `system_stm32f10x.h`：系统初始化相关头文件。
- `Template.BAT`：Keil/MDK 编译脚本，不涉及功能开发，一般不用编辑。

> **建议**：开发者主要在 USER 目录下编辑和扩展功能。STM32F10x_FWLib 目录尽量不要修改。

---

## 各文件编辑建议

- **需要编辑的文件**：
  - `USER/main.c`：主流程、功能调用入口
  - `USER/gpio.c/h`、`motor_duoji.c/h`、`key.c/h`、`oled.c/h`、`adc.c/h`、`usart.c/h` 等
    - 根据项目功能要求，完善各模块代码
    - 如增加语音识别处理、垃圾分类逻辑、WiFi数据上传、OLED显示内容等

- **不建议修改的文件**：
  - `STM32F10x_FWLib/inc` 和 `STM32F10x_FWLib/src`：除非有底层驱动特殊需求，一般无需更改

- **编译相关文件**：
  - `USER/Template.BAT`：编译脚本，仅影响编译流程，不涉及功能开发

---

## 项目开发流程建议

1. **硬件初始化与配置**
   - 在 `main.c` 中初始化各硬件模块（GPIO、ADC、USART、舵机等）

2. **功能模块开发**
   - 按项目需求开发各功能模块（语音识别、垃圾分类、容量检测、WiFi通信、OLED显示等）
   - 各模块分别在 USER 目录下对应的 .c/.h 文件实现

3. **主循环逻辑**
   - 根据传感器/语音/按键输入，控制垃圾桶盖子、照明模块、OLED显示等
   - 实现垃圾投放次数统计、满桶提示、语音播报等逻辑

4. **云平台通信**
   - 在 `usart.c/h` 或专门的 WiFi 模块代码中，实现数据上传云平台功能

5. **调试与完善**
   - 持续调试各功能模块，完善功能细节和稳定性

---

## 参考

- STM32 官方标准外设库文档
- 项目硬件原理图及各模块数据手册

---

## 特别说明

- 本项目依赖 STM32F10x 系列标准外设库，请确保 USER 目录下代码与外设库版本兼容。
- 修改 USER 目录下代码时，建议分模块开发和调试，避免主程序过于复杂。
- 如果需要新增硬件或功能，请先在 USER 目录下新建相应 .c/.h 文件，再在主程序中调用。
